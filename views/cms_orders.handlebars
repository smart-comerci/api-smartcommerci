<div class="content">
    <br>
    <div style="justify-content: right; margin-right: 0%; margin-top: 20px" class="row">
        <div class="col" style="justify-content: right; margin-right: 0%; display: flow-root;">
            <label style="font: normal normal bold 2rem Roboto; float: left;">Pedidos</label>
        </div>
        <div style="max-width: 50px;" class="col-lg-4"></div>
        <label class="label">Visão dos pedidos</label>

        <div layout="layout1"
            style="border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: right; margin-right: 15px;"
            class="input-group mudaLayout dourado">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                style="margin-left: 10px; margin-top: 10px; cursor: pointer" viewBox="0 0 18 18">
                </defs>
                <path class="a"
                    d="M15.5,18H2.5A2.5,2.5,0,0,1,0,15.5V2.5A2.5,2.5,0,0,1,2.5,0h13A2.5,2.5,0,0,1,18,2.5v13A2.5,2.5,0,0,1,15.5,18ZM1,4V15.5A1.5,1.5,0,0,0,2.5,17h13A1.5,1.5,0,0,0,17,15.5V4ZM2.5,1A1.5,1.5,0,0,0,1,2.5V3H17V2.5A1.5,1.5,0,0,0,15.5,1Zm11,14h-1A1.5,1.5,0,0,1,11,13.5v-6A1.5,1.5,0,0,1,12.5,6h1A1.5,1.5,0,0,1,15,7.5v6A1.5,1.5,0,0,1,13.5,15Zm-1-8a.5.5,0,0,0-.5.5v6a.5.5,0,0,0,.5.5h1a.5.5,0,0,0,.5-.5v-6a.5.5,0,0,0-.5-.5ZM8.25,15H3.75C3.336,15,3,14.776,3,14.5s.337-.5.751-.5h4.5c.413,0,.75.224.75.5S8.664,15,8.25,15Zm0-2H3.75C3.336,13,3,12.776,3,12.5s.337-.5.751-.5h4.5c.413,0,.75.224.75.5S8.664,13,8.25,13Zm0-2H3.75C3.336,11,3,10.776,3,10.5s.337-.5.751-.5h4.5c.413,0,.75.224.75.5S8.664,11,8.25,11ZM8.5,9h-5a.5.5,0,1,1,0-1h5a.5.5,0,1,1,0,1Zm0-2h-5a.5.5,0,1,1,0-1h5a.5.5,0,1,1,0,1Z" />
            </svg>
        </div>

        <div layout="layout2"
            style="border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: right; margin-right: 15px;"
            class="input-group  mudaLayout ">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                style="margin-left: 10px; margin-top: 10px;  cursor: pointer" viewBox="0 0 18 18">
                <defs> </defs>
                <path class="a"
                    d="M15.5,18H2.5A2.5,2.5,0,0,1,0,15.5V2.5A2.5,2.5,0,0,1,2.5,0h13A2.5,2.5,0,0,1,18,2.5v13A2.5,2.5,0,0,1,15.5,18ZM1,4V15.5A1.5,1.5,0,0,0,2.5,17h13A1.5,1.5,0,0,0,17,15.5V4ZM2.5,1A1.5,1.5,0,0,0,1,2.5V3H17V2.5A1.5,1.5,0,0,0,15.5,1ZM14.232,15H3.726c-.414,0-.751-.224-.751-.5s.337-.5.751-.5H14.232c.413,0,.75.224.75.5S14.645,15,14.232,15Zm-.024-2H3.75C3.336,13,3,12.776,3,12.5s.337-.5.751-.5H14.207c.413,0,.75.224.75.5S14.621,13,14.207,13Zm.029-2H3.75C3.336,11,3,10.776,3,10.5s.337-.5.751-.5H14.236c.413,0,.75.224.75.5S14.65,11,14.236,11ZM14.5,9H3.5a.5.5,0,1,1,0-1h11a.5.5,0,1,1,0,1Zm-.08-2H3.5a.5.5,0,1,1,0-1H14.423a.5.5,0,1,1,0,1Z" />
            </svg>
        </div>


        <div style=" border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 300px; height: 40px; border: 1px solid #efefef; float: right;"
            class="input-group">


            <div class="datetimepicker-dummy-wrapper">
                <input style="display: none;" placeholder="" readonly="readonly"
                    class="datetimepicker-dummy-input is-datetimepicker-range primeiraData" type="text">
                <input style="display: none;" placeholder="" readonly="readonly"
                    class="datetimepicker-dummy-input segundaData" type="text">
                <input style="text-align:center !important; width: 100%; opacity: 1 !important" type="text" class="demo4" value=" - ">
            </div>
        </div>


        <div style="border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 220px; height: 40px; border: 1px solid #efefef; float: right; margin-right: 15px;"
            class="input-group">
            <div style="border: none;" class="input-group-append">
                <div style="border: none;" class="input-group-text">
                    <img style="border: none;" src="../assets/img/store.svg" alt="" />
                </div>
            </div>
            <select style="border: none;" class="form-control listaDeUnidades">

            </select>
        </div>


    </div>
    <hr />
    <br />
    <div id="layout1" class="row ">
        <div id="panelOrder1" class="col-md-4">
            <div class="card card-tasks radius20 esq" style="padding: 2%;">
                <div style=" min-height:50px; justify-content: center !important" class="card-header">
                    <div style="
                     background-color: #e9ecef; fill: #e9ecef;
                     border: 1px solid #ced4da;
                     border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: left;  "
                        class="input-group iconOpaco ico menuPedidos">
                        <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21"
                            style="margin-left: 8px; margin-top: 8px;">
                            <defs> </defs>
                            <path class="a"
                                d="M11.812,18H2.188A2.222,2.222,0,0,1,0,15.751V2.251A2.222,2.222,0,0,1,2.188,0h7.877a.426.426,0,0,1,.307.132l3.5,3.6A.45.45,0,0,1,14,4.077V15.751A2.222,2.222,0,0,1,11.812,18ZM2.188.9A1.333,1.333,0,0,0,.875,2.251v13.5A1.333,1.333,0,0,0,2.188,17.1h9.624a1.333,1.333,0,0,0,1.313-1.349V4.5H10.062a.445.445,0,0,1-.438-.45V.9Zm8.311.637V3.6h2.006ZM9.624,14.4H8.749a.889.889,0,0,1-.875-.9v-.9H5.25v.9a.889.889,0,0,1-.875.9H3.5a.889.889,0,0,1-.875-.9v-.9a.889.889,0,0,1,.875-.9h.876a.887.887,0,0,1,.16.015L5.873,8.961A.891.891,0,0,1,5.25,8.1V7.2a.889.889,0,0,1,.875-.9H7a.889.889,0,0,1,.875.9v.9a.891.891,0,0,1-.623.862L8.59,11.715a.859.859,0,0,1,.159-.015h.875a.889.889,0,0,1,.875.9v.9A.889.889,0,0,1,9.624,14.4Zm-.875-1.8v.9h.875v-.9Zm-5.25,0v.9h.876v-.9ZM6.562,9.556,5.52,11.7H7.6L6.562,9.556ZM6.125,7.2v.9H7V7.2Z"
                                transform="translate(4 2)" />
                        </svg>
                    </div>
                    <div style="
                     background-color: #e9ecef; fill: #e9ecef;
                     border: 1px solid #ced4da;
                     border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: left; "
                        class="input-group iconOpaco ico menuPedidos">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 17.662 15.929"
                            style="margin-left: 8px; margin-top: 8px;">
                            <defs></defs>
                            <path class="a"
                                d="M14.571,15.929H3.091a.442.442,0,0,1-.442-.441v-2.23H1.325A1.326,1.326,0,0,1,0,11.933V7.517A2.211,2.211,0,0,1,2.208,5.309h.441V.452A.442.442,0,0,1,3.091.01L14.571,0a.442.442,0,0,1,.442.442V5.309h.441a2.211,2.211,0,0,1,2.208,2.208v4.43a1.326,1.326,0,0,1-1.324,1.325H15.013v2.216A.442.442,0,0,1,14.571,15.929ZM3.532,11.491v3.554h10.6V11.491Zm-.441-.883h11.48a.442.442,0,0,1,.442.441v1.339h1.325a.442.442,0,0,0,.441-.442V7.517a1.326,1.326,0,0,0-1.325-1.325h-.441v3.1a.442.442,0,0,1-.442.442H3.091a.442.442,0,0,1-.442-.442v-3.1H2.208A1.326,1.326,0,0,0,.883,7.517v4.415a.442.442,0,0,0,.442.442H2.649V11.05A.442.442,0,0,1,3.091,10.608ZM14.13.883l-10.6.01V8.853h10.6V.883ZM10.156,7.075H5.74a.442.442,0,0,1,0-.883h4.416a.442.442,0,0,1,0,.883Zm1.766-1.766H5.74a.442.442,0,0,1,0-.883h6.182a.442.442,0,1,1,0,.883Zm0-1.766H5.74a.442.442,0,0,1,0-.883h6.182a.442.442,0,1,1,0,.883Z"
                                transform="translate(0 0)" />
                        </svg>
                    </div>
                    <div style="
                     background-color: #e9ecef; fill: #e9ecef;
                     border: 1px solid #ced4da;
                     border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: left;  "
                        class="input-group iconOpaco ico menuPedidos">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 21 21"
                            style="margin-left: 6px; margin-top: 6px;">
                            <defs></defs>
                            <path class="a"
                                d="M10.937,16H3.063A2.208,2.208,0,0,1,.875,13.778V2.666H.438a.444.444,0,0,1,0-.889H4.375V1.334A1.324,1.324,0,0,1,5.687,0H8.313A1.324,1.324,0,0,1,9.625,1.334v.444h3.937a.444.444,0,0,1,0,.889h-.437V13.778A2.208,2.208,0,0,1,10.937,16ZM1.75,2.666V13.778a1.325,1.325,0,0,0,1.313,1.334h7.875a1.325,1.325,0,0,0,1.313-1.334V2.666ZM5.687.889a.441.441,0,0,0-.437.445v.444h3.5V1.334A.441.441,0,0,0,8.313.889Zm3.5,11.556A.442.442,0,0,1,8.75,12V5.778a.437.437,0,1,1,.875,0V12A.441.441,0,0,1,9.188,12.445Zm-4.375,0A.441.441,0,0,1,4.375,12V5.778a.437.437,0,1,1,.875,0V12A.442.442,0,0,1,4.812,12.445Z"
                                transform="translate(4 3)" />
                        </svg>
                    </div>
                    <div style="display:none;
                     background-color: #e9ecef; fill: #e9ecef; justify-content: center;
                     border: 1px solid #ced4da;
                     border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 100px; height: 40px; border: 1px solid #efefef; float: left;  "
                        class="input-group ico">
                        <svg xmlns="http://www.w3.org/2000/svg"
                            style="fill: rgb(83, 83, 83)!important;margin-left: 10px; margin-top: 10px; " width="20"
                            height="20" viewBox="0 0 20 20">
                            <defs> </defs>
                            <path class="a"
                                d="M8.333,16.667a8.333,8.333,0,1,1,8.333-8.333A8.343,8.343,0,0,1,8.333,16.667Zm0-15.833a7.5,7.5,0,1,0,6.495,3.75A7.508,7.508,0,0,0,8.333.833Zm1.25,10.834h-2.5a.417.417,0,0,1,0-.834h2.5a.417.417,0,0,1,0,.834Zm1.667-2.5H5.417a.417.417,0,0,1,0-.833H11.25a.417.417,0,1,1,0,.833Zm1.667-2.5H3.75a.417.417,0,1,1,0-.833h9.167a.417.417,0,1,1,0,.833Z"
                                transform="translate(1.667 1.667)" />
                        </svg>
                        <label style="margin-left: 5%;" class="label filtrandoAll">Filtro</label>
                    </div>
                    <div style="
                     cursor: pointer;
                     background-color: #e9ecef; fill: #e9ecef;
                     border: 1px solid #ced4da;
                     border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: right; "
                        class="input-group dourado">
                        <i id="getSubSearch"
                            style="cursor: pointer;    color: #f6b504;    font-weight: bold;    margin-left: 10px;    margin-top: 10px;}"
                            class="fas fa-search"></i>
                    </div>
                    <br>
                    <div class="input-group">
                        <input type="text" id="subSearch" placeholder="Pesquise aqui..."
                            class="form-control orderSearch" style="display: none;">
                    </div>
                </div>
                <hr>
                <div id="listaPedidosLeft">




                </div>


            </div>
        </div>
        <div id="panelOrder2" class="col-md-8">

        </div>
    </div>

    <div id="layout2" style="display: none;" class="row">
        <div style="background-color: white; padding: 2%" class="col-md-12">

            <div class="row">



                <div class="col-md-3">
                    <div class="row">
                        <div style="
                           background-color: #e9ecef; fill: #e9ecef;
                           border: 1px solid #ced4da;
                           border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: left; margin-left: 15px;"
                            class="input-group iconOpaco ico menuPedidos">
                            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21"
                                style="margin-left: 8px; margin-top: 8px;">
                                <defs> </defs>
                                <path class="a"
                                    d="M11.812,18H2.188A2.222,2.222,0,0,1,0,15.751V2.251A2.222,2.222,0,0,1,2.188,0h7.877a.426.426,0,0,1,.307.132l3.5,3.6A.45.45,0,0,1,14,4.077V15.751A2.222,2.222,0,0,1,11.812,18ZM2.188.9A1.333,1.333,0,0,0,.875,2.251v13.5A1.333,1.333,0,0,0,2.188,17.1h9.624a1.333,1.333,0,0,0,1.313-1.349V4.5H10.062a.445.445,0,0,1-.438-.45V.9Zm8.311.637V3.6h2.006ZM9.624,14.4H8.749a.889.889,0,0,1-.875-.9v-.9H5.25v.9a.889.889,0,0,1-.875.9H3.5a.889.889,0,0,1-.875-.9v-.9a.889.889,0,0,1,.875-.9h.876a.887.887,0,0,1,.16.015L5.873,8.961A.891.891,0,0,1,5.25,8.1V7.2a.889.889,0,0,1,.875-.9H7a.889.889,0,0,1,.875.9v.9a.891.891,0,0,1-.623.862L8.59,11.715a.859.859,0,0,1,.159-.015h.875a.889.889,0,0,1,.875.9v.9A.889.889,0,0,1,9.624,14.4Zm-.875-1.8v.9h.875v-.9Zm-5.25,0v.9h.876v-.9ZM6.562,9.556,5.52,11.7H7.6L6.562,9.556ZM6.125,7.2v.9H7V7.2Z"
                                    transform="translate(4 2)" />
                            </svg>
                        </div>
                        <div style="
                           background-color: #e9ecef; fill: #e9ecef;
                           border: 1px solid #ced4da;
                           border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: left; margin-left: 15px;"
                            class="input-group iconOpaco ico menuPedidos">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 17.662 15.929"
                                style="margin-left: 8px; margin-top: 8px;">
                                <defs></defs>
                                <path class="a"
                                    d="M14.571,15.929H3.091a.442.442,0,0,1-.442-.441v-2.23H1.325A1.326,1.326,0,0,1,0,11.933V7.517A2.211,2.211,0,0,1,2.208,5.309h.441V.452A.442.442,0,0,1,3.091.01L14.571,0a.442.442,0,0,1,.442.442V5.309h.441a2.211,2.211,0,0,1,2.208,2.208v4.43a1.326,1.326,0,0,1-1.324,1.325H15.013v2.216A.442.442,0,0,1,14.571,15.929ZM3.532,11.491v3.554h10.6V11.491Zm-.441-.883h11.48a.442.442,0,0,1,.442.441v1.339h1.325a.442.442,0,0,0,.441-.442V7.517a1.326,1.326,0,0,0-1.325-1.325h-.441v3.1a.442.442,0,0,1-.442.442H3.091a.442.442,0,0,1-.442-.442v-3.1H2.208A1.326,1.326,0,0,0,.883,7.517v4.415a.442.442,0,0,0,.442.442H2.649V11.05A.442.442,0,0,1,3.091,10.608ZM14.13.883l-10.6.01V8.853h10.6V.883ZM10.156,7.075H5.74a.442.442,0,0,1,0-.883h4.416a.442.442,0,0,1,0,.883Zm1.766-1.766H5.74a.442.442,0,0,1,0-.883h6.182a.442.442,0,1,1,0,.883Zm0-1.766H5.74a.442.442,0,0,1,0-.883h6.182a.442.442,0,1,1,0,.883Z"
                                    transform="translate(0 0)" />
                            </svg>
                        </div>
                        <div style="
                           background-color: #e9ecef; fill: #e9ecef;
                           border: 1px solid #ced4da;
                           border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 40px; height: 40px; border: 1px solid #efefef; float: left; margin-left: 15px;"
                            class="input-group iconOpaco ico menuPedidos">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 21 21"
                                style="margin-left: 6px; margin-top: 6px;">
                                <defs></defs>
                                <path class="a"
                                    d="M10.937,16H3.063A2.208,2.208,0,0,1,.875,13.778V2.666H.438a.444.444,0,0,1,0-.889H4.375V1.334A1.324,1.324,0,0,1,5.687,0H8.313A1.324,1.324,0,0,1,9.625,1.334v.444h3.937a.444.444,0,0,1,0,.889h-.437V13.778A2.208,2.208,0,0,1,10.937,16ZM1.75,2.666V13.778a1.325,1.325,0,0,0,1.313,1.334h7.875a1.325,1.325,0,0,0,1.313-1.334V2.666ZM5.687.889a.441.441,0,0,0-.437.445v.444h3.5V1.334A.441.441,0,0,0,8.313.889Zm3.5,11.556A.442.442,0,0,1,8.75,12V5.778a.437.437,0,1,1,.875,0V12A.441.441,0,0,1,9.188,12.445Zm-4.375,0A.441.441,0,0,1,4.375,12V5.778a.437.437,0,1,1,.875,0V12A.442.442,0,0,1,4.812,12.445Z"
                                    transform="translate(4 3)" />
                            </svg>
                        </div>

                    </div>

                </div>
                <div style="opacity: 1;display: inline-grid;" class="col-md-9">
                    <div style="float: right;justify-content: right;" class=" row">
                        <form style="min-width: 60%; margin-right: 55px; float: right !important">
                            <div class="input-group">
                                <input type="text" value="" class="form-control"
                                    placeholder="Busque por pedido ou cliente">
                                <div class="input-group-append">
                                    <div class="input-group-text">

                                        <svg style="color: #f6b504; font-weight: bold;"
                                            class="svg-inline--fa fa-search fa-w-16" aria-hidden="true"
                                            focusable="false" data-prefix="fas" data-icon="search" role="img"
                                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                            <path fill="currentColor"
                                                d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z">
                                            </path>
                                        </svg>
                                        <!-- <i style="color: #f6b504; font-weight: bold;" class="fas fa-search"></i> Font Awesome fontawesome.com -->
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div style="display:none; background-color: #e9ecef; fill: #e9ecef; justify-content: center;
                              border: 1px solid #ced4da;
                              border-radius: 20px; font: normal normal bold 1rem Roboto; background-color: #ffffff; max-width: 100px; height: 40px; border: 1px solid #efefef; float: right !important; margin-right: 15px;"
                            class="input-group ico">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                style="fill: rgb(83, 83, 83)!important;margin-left: 10px; margin-top: 10px; " width="20"
                                height="20" viewBox="0 0 20 20">
                                <defs> </defs>
                                <path class="a"
                                    d="M8.333,16.667a8.333,8.333,0,1,1,8.333-8.333A8.343,8.343,0,0,1,8.333,16.667Zm0-15.833a7.5,7.5,0,1,0,6.495,3.75A7.508,7.508,0,0,0,8.333.833Zm1.25,10.834h-2.5a.417.417,0,0,1,0-.834h2.5a.417.417,0,0,1,0,.834Zm1.667-2.5H5.417a.417.417,0,0,1,0-.833H11.25a.417.417,0,1,1,0,.833Zm1.667-2.5H3.75a.417.417,0,1,1,0-.833h9.167a.417.417,0,1,1,0,.833Z"
                                    transform="translate(1.667 1.667)" />
                            </svg>
                            <label style="margin-left: 5%;" class="label filtrandoAll">Filtro</label>
                        </div>

                    </div>
                </div>



            </div>
            <div class="row"
                style="padding-bottom: 0;max-height: 60px;border-bottom: 1px solid #efefef;margin-top: 5%;">
                <div style="max-width: 50px !important;" class="col-sm orderInner">
                    <label class="checkSmart" style="margin: -45% 25% !important;"><input onchange="marka($(this))"
                            lista="listaDeProdutos" id="checkFull" class="checka form-control" type="checkbox" /><span
                            class="checkmark"></span></label>
                </div>

                <div style="max-width: 150px !important;" class="col-sm orderInner">
                    <label field="product_code" sentido="ASC" class="infoLabel ordena">#Número <i
                            class="fas fa-sort"></i></label>
                </div>
                <div class="col-sm orderInner  col-text">
                    <label field="product_descricao" sentido="ASC" class="infoLabel ordena">Cliente <i
                            class="fas fa-sort"></i></label>
                </div>
                <div style="min-width: 300px !important; max-width: 300px !important;" class="col-sm orderInner">
                    <label field="product_affiliate_id" sentido="ASC" class="infoLabel ordena">Status <i
                            class="fas fa-sort"></i></label>
                </div>
                <div class="col-sm orderInner">
                    <label field="product_valor" sentido="ASC" class="infoLabel ordena">Valor <i
                            class="fas fa-sort"></i></label>
                </div>
                <div class="col-sm orderInner">
                    <label field="product_estoque" sentido="ASC" class="infoLabel ordena">Unidade <i
                            class="fas fa-sort"></i></label>
                </div>
                <div class="col-sm orderInner   col-text">
                    <label field="product_fabricacao" sentido="ASC" class="infoLabel ordena">Dado da entrega <i
                            class="fas fa-sort"></i></label>
                </div>
                <div class="col-sm orderInner">
                    <label field="product_etiquetas" sentido="ASC" class="infoLabel ordena">Ações <i
                            class="fas fa-sort"></i></label>
                </div>

            </div>
            <div class="listaDePedidos ">



            </div>
        </div>
    </div>
</div>


</div>
<script src="../assets/js/core/jquery.min.js"></script>
<script>
    var mainHost = 'https://api-smartcomerci.com.br:9090';

    localStorage.TODOS_OS_PEDIDOS = ''
    localStorage.PEDIDO_SENDO_EDITADO = ''

    $(".esq").addClass("animated-background")
    $("#panelOrder2").addClass("animated-background")

    var FEEDBACK = null,
        modalCount = 0




    async function reloadThis() {
        await updateTotalPedidos()
        await $.ajax({
            type: "POST",
            url: "https://api-smartcomerci.com.br:9090/getOrdersTemplate",
            headers: {
                "x-access-token": localStorage.token,
            },
            data: {
                "affiliate_id": localStorage.AFFILIATE_ID,
                "template": 1
            },
            success: function (resultado) {
                //console.log('resultado', resultado)

                $("#listaPedidosLeft").html(resultado)

                $(".checka").change(function () {
                    var isOk = false
                    $(".checka").each(function () {
                        if ($(this)[0].checked == true) {
                            isOk = true
                        }
                    })
                    if (isOk == true) {
                        $(".menuPedidos").addClass("activeClick")
                    } else {
                        $(".menuPedidos").removeClass("activeClick")
                    }
                })

                $(".esq").removeClass("animated-background")


                setTimeout(() => {
                    if (localStorage.setStatusOrder == undefined) {
                        $(".orderActive").click()

                        $(".myStatus").each(function () {
                            var st = Number($(this).text().trim())
                            switch (st) {
                                case 1:
                                    $(this).text("Pedido recebido");

                                    break;
                                case 2:
                                    $(this).text("Em separação");
                                    $(this).parent().css("color", "#25BEF7")
                                    break;
                                case 3:
                                    $(this).text("Saiu para entrega");
                                    $(this).parent().css("color", "#25BEF7")
                                    break;
                                case 4:
                                    $(this).text("Pedido entregue");
                                    $(this).parent().css("color", "#50C682")
                                    break;
                                default:
                                    break;
                            }

                        })

                    } else {

                        $(".order").removeClass("orderActive")
                        $(".order").each(function () {
                            //console.log($(this).attr("alvo"), localStorage.setStatusOrder)
                            if ($(this).attr("alvo") == localStorage.setStatusOrder) {
                                $(this).addClass("orderActive")
                                $(".orderActive").click()

                                $(".myStatus").each(function () {
                                    var st = Number($(this).text().trim())
                                    switch (st) {
                                        case 1:
                                            $(this).text("Pedido recebido");

                                            break;
                                        case 2:
                                            $(this).text("Em separação");
                                            $(this).parent().css("color", "#25BEF7")
                                            break;
                                        case 3:
                                            $(this).text("Saiu para entrega");
                                            $(this).parent().css("color", "#25BEF7")
                                            break;
                                        case 4:
                                            $(this).text("Pedido entregue");
                                            $(this).parent().css("color", "#50C682")
                                            break;
                                        default:
                                            break;
                                    }

                                })

                            }
                        })

                    }



                }, 1000)


                $(".loja").each(function () {
                    var txt = $(this).text()
                    if (Number(txt)) {
                        $(this).text(pegaLojaNome(txt))
                    }

                })

                $.ajax({
                    type: "POST",
                    url: "https://api-smartcomerci.com.br:9090/getOrdersTemplate",
                    headers: {
                        "x-access-token": localStorage.token,
                    },
                    data: {
                        "affiliate_id": localStorage.AFFILIATE_ID,
                        "template": 2
                    },
                    success: function (resultado) {

                        //console.log(resultado)
                        $(".listaDePedidos").html(resultado)



                        $(".orderList").click(function (e) {
                            var thisOrder2 = Number($("#orderFull").attr("orderID"))
                            var senderElement = e.target;
                            e.stopPropagation()
                            e.preventDefault()


                            if (senderElement.className != "checkmark" &&
                                senderElement.className != "naoAbreModal" &&
                                senderElement.className != "checka form-control" &&
                                senderElement.className != "switch switch--shadow") {
                                $("#superIcons").addClass("iconOnModal")
                                $("#hd").addClass(" orderOnModal")
                                $(".orderBody").addClass("orderBody2")

                                $("#orderFull").find(".rastreio").addClass("rastreio2")
                                $("#nPedido").addClass("nPedido")




                                var html = '<div style="max-width: 70%; max-height: 90vh; height: 100vh; margin-top -1%" class="container verticalScroll notScroll on"><br><br><br><br>' + $("#orderFull").html() + '</div>'

                                bootbox.alert({
                                    message: html,
                                    onShow: function () {




                                        $(".fa-times-circle").click(function () {
                                            $(this).parent().parent().remove()
                                        })



                                    },
                                    callback: function () {
                                        $("#superIcons").removeClass("iconOnModal")
                                        $("#hd").removeClass(" orderOnModal")
                                        $(".orderBody2").addClass("orderBody")
                                        $(".orderBody2").removeClass("orderBody2")
                                        $(".rastreio").removeClass("rastreio2")
                                        ////console.log('The styles was removed!');
                                        $("#nPedido").removeClass("nPedido")
                                    }
                                })

                                $(".modal-footer").hide()
                                $(".modal-body").css("max-height", "96vh")
                                $(".bootbox-body").css("background", "#fafafd")


                            }



                        })

                        $(".loja").each(function () {
                            var txt = $(this).text()
                            if (Number(txt)) {
                                $(this).text(pegaLojaNome(txt))
                            }
                        })

                    },
                    error: function (resultado) {
                        //console.log("aqui esta o erro", resultado);
                        if (resultado.responseJSON.message.indexOf("token") > -1) {
                            //console.log("Necessário fazer login!<br>" + resultado.responseJSON.message)
                            setTimeout(() => {
                                location.replace("/cms-login")
                            }, 2000)

                        } else {

                            informar("alert-primary", "Algo saiu errado!<br>" + resultado.responseJSON.message, 3000)
                        }
                    },
                    complete: function () {
                        $(".orderActive").click()
                    },
                });

            },
            error: function (resultado) {

                //console.log("aqui esta o erro", resultado);
                if (resultado.responseJSON.message.indexOf("token") > -1) {
                    //console.log("Necessário fazer login!<br>" + resultado.responseJSON.message)
                    setTimeout(() => {
                        location.replace("/cms-login")
                    }, 2000)

                } else {

                    informar("alert-primary", "Algo saiu errado!<br>" + resultado.responseJSON.message, 3000)
                }
            },
            complete: function () {
                $("body").css("filter", "none")
             },
        });

    }
    $(".mudaLayout").click(function () {
        $(".mudaLayout").removeClass("dourado")
        $(this).addClass("dourado")
        $("#layout2").hide()
        $("#layout1").hide()
        $("#" + $(this).attr("layout")).show()
        reloadThis()
    })

    function FULL_PRICES(produto) {
        try {
            ////console.log("PREPRANDO O PRODUTO ",produto)
            let PRODUDO_FINAL
            let COMPRA_PESO = {}, COMPRA_POR_PESO = false

            try {
                COMPRA_POR_PESO = JSON.parse(produto['product_sell_by_weight'])['compraPorPeso']
            } catch (e) { }

            let DESCONTOS = {}
            try {
                DESCONTOS = JSON.parse(produto['product_site_discount_value'])
            } catch (err) {

            }
            let VENDA;
            let MINIMO_PARA_DESCONTO = 0
            let VALOR_DESCONTO = 0, descontoExiste = false, valorDescontado = 0, tipoDesconto = 'nenhum'

            ////console.log('o desconto',produto['product_site_discount_type'].indexOf('preço total'))
            ////console.log('DESCONTOS',DESCONTOS)
            if (produto['product_site_discount_type'].indexOf('compre X pague Y') > -1) {

                VALOR_DESCONTO = DESCONTOS['levePague'].precoFinal
                tipoDesconto = "levePague"
                valorDescontado = DESCONTOS['levePague'].valorDescontado
                MINIMO_PARA_DESCONTO = Number(DESCONTOS['levePague'].valorDescontado.split(" ")[1])
                descontoExiste = true
            } else if (produto['product_site_discount_type'].indexOf('no carrinho') > -1) {
                if (DESCONTOS['porcentagemProduto'].active) {
                    ////console.log(DESCONTOS)
                    VALOR_DESCONTO = DESCONTOS['porcentagemProduto'].precoFinal
                    descontoExiste = true
                    valorDescontado = Number(DESCONTOS['porcentagemProduto'].percentualDescontado)
                    tipoDesconto = "percentual"
                }

                if (DESCONTOS['subtracaoProduto'].active) {
                    ////console.log(DESCONTOS)
                    VALOR_DESCONTO = DESCONTOS['subtracaoProduto'].precoFinal
                    descontoExiste = true
                    valorDescontado = Number(DESCONTOS['subtracaoProduto'].valorDescontado)
                    tipoDesconto = "subtracao"
                }


            } else if (produto['product_site_discount_type'].indexOf('preço total') > -1) {
                ////console.log('tebgo descobto')
                if (DESCONTOS['porcentagem'].active) {
                    ////console.log(DESCONTOS)
                    VALOR_DESCONTO = DESCONTOS['porcentagem'].precoFinal
                    descontoExiste = true
                    valorDescontado = Number(DESCONTOS['porcentagem'].percentualDescontado)
                    tipoDesconto = "porcentagem"
                }

                if (DESCONTOS['subtracao'].active) {
                    ////console.log(DESCONTOS)
                    VALOR_DESCONTO = DESCONTOS['subtracao'].precoFinal
                    descontoExiste = true
                    valorDescontado = Number(DESCONTOS['subtracao'].valorDescontado)
                    tipoDesconto = "subtracao"
                }
            } else {
                ////console.log('desconto inexistente!', descontoExiste)
            }




            let PRECO_VENDA = produto['product_valor']

            if (COMPRA_PESO === true) {
                PRECO_VENDA = produto['product_site_value']
            }

            if (descontoExiste) {
                ////console.log(" O DESCONTO ",VALOR_DESCONTO)
                PRECO_VENDA = VALOR_DESCONTO
            }

            if (COMPRA_PESO === true) {
                let percentual = produto['product_site_value'] * 100 / produto['product_valor']
                let AJUSTAR = 100 - percentual

                ////console.log("ajustando",percentual,AJUSTAR, PRECO_VENDA)

                PRECO_VENDA = PRECO_VENDA * (AJUSTAR / 100)
                VALOR_DESCONTO = VALOR_DESCONTO * (AJUSTAR / 100)

                if (produto['product_average_weight_type'] == 'gramas') {
                    VALOR_DESCONTO = VALOR_DESCONTO * Number(produto['product_average_weight_value']) / 1000
                    PRECO_VENDA = PRECO_VENDA * Number(produto['product_average_weight_value']) / 1000
                }
                if (produto['product_average_weight_type'] == 'centimetros') {
                    VALOR_DESCONTO = VALOR_DESCONTO * Number(produto['product_average_weight_value']) / 100
                    PRECO_VENDA = PRECO_VENDA * Number(produto['product_average_weight_value']) / 100
                }


                VENDA = {
                    valor_bruto: produto['product_site_value'],
                    preco_venda: Number(PRECO_VENDA.toFixed(2)),
                    existe_desconto: descontoExiste,
                    valor_com_desconto: VALOR_DESCONTO,
                    origem_desconto: produto['product_site_discount_type'],
                    venda_por_peso: COMPRA_POR_PESO,
                    tipo_desconto: tipoDesconto,
                    percentual_valor_descontado: valorDescontado,
                    peso_por_unidade: Number(produto['product_average_weight_value']),
                    medida_da_unidade: produto['product_average_weight_type'],
                    minimo_para_desconto: MINIMO_PARA_DESCONTO
                }



            } else {
                VENDA = {
                    valor_bruto: produto['product_valor'],
                    preco_venda: Number(PRECO_VENDA.toFixed(2)),
                    existe_desconto: descontoExiste,
                    valor_com_desconto: VALOR_DESCONTO,
                    origem_desconto: produto['product_site_discount_type'],
                    venda_por_peso: COMPRA_POR_PESO,
                    tipo_desconto: tipoDesconto,
                    percentual_valor_descontado: valorDescontado,
                    peso_por_unidade: Number(produto['product_average_weight_value']),
                    medida_da_unidade: produto['product_average_weight_type'],
                    minimo_para_desconto: MINIMO_PARA_DESCONTO
                }
            }



            PRODUDO_FINAL = {
                produto: produto,
                venda: VENDA
            }



            return PRODUDO_FINAL

        } catch (err) {

            let VENDA = {
                valor_bruto: produto['product_valor'],
                preco_venda: produto['product_valor'],
                existe_desconto: false,
                valor_com_desconto: produto['product_valor'],
                origem_desconto: produto['product_site_discount_type'],
                venda_por_peso: false,
                tipo_desconto: "nenhum",
                percentual_valor_descontado: produto['product_valor'],
                peso_por_unidade: Number(produto['product_average_weight_value']),
                medida_da_unidade: produto['product_average_weight_type'],
                minimo_para_desconto: 0
            }



            let PRODUDO_FINAL = {
                produto: produto,
                venda: VENDA
            }

            return PRODUDO_FINAL

        }

    }


    function listaItensPedidos(dat) {
        var html = ''

        function numberAdjust(number) {
            return ("00000" + number).slice(-5)
        }
        for (const d in dat) {



            let produtoFinal = FULL_PRICES(dat[d])
            //console.log('produtoFinal', produtoFinal)
            let precoVenda = produtoFinal.venda.valor_bruto

            if (produtoFinal.venda.existe_desconto === true && dat[d].quantidade >= produtoFinal.venda.minimo_para_desconto) {
                precoVenda = produtoFinal.venda.preco_venda
            }

            var desconto = (produtoFinal.venda.valor_bruto - produtoFinal.venda.preco_venda) * dat[d].quantidade





            html += '<div class="row radius20 top3 orderContent itemPedido" valor="' + produtoFinal.venda.valor_bruto + '" caracteristica="' + dat[d].caracteristica + '" product_code="' + dat[d].product_code + '" anotacao="' + dat[d].comentario + '" style="background: #ffffff;">' +
                '<div style="min-width: 300px !important;max-width: 300px !important; opacity: 1;" class="col-sm">' +
                '<div class="row">' +
                ' <div getPic="0"  style="    margin-left: 15px;" product_code="' + dat[d].product_code + '" product_ean="' + dat[d].product_ean + '" class="image img miniatura"> </div>' +
                '<div class="itemDetails" style="opacity: 1; margin: auto 25px;">' +
                '<span class="codigoItem">' + dat[d].product_code + '</span><br>' +
                '<label class="label" style="line-height: 1.5 !important;">' + dat[d].product_site_name + '</label>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '<div class="col-sm" style="opacity: 1;max-width: 166.31px; min-width: 166.31px">' +
                '<label class="infoLabel infoValor totais2 quantidade"> <input onchange="atualizaPedido()" type="text" value="' + dat[d].quantidade + '" class="form-control inValue quantidadePedido"> ' +
                '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
                '<defs></defs>' +
                '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
                'transform="translate(2.488 2.499)"' +
                '></path>' +
                '</svg>' +
                '</label>' +
                '</div>' +
                '<div class="col-sm" style="opacity: 1;max-width: 166.31px; min-width: 166.31px">' +
                '<label class="infoLabel infoValor totais2 valor"> <span class="money">R$</span><input type="text" value="' + produtoFinal.venda.valor_bruto + '" class="form-control inValue"> ' +
                '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
                '<defs></defs>' +
                '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
                'transform="translate(2.488 2.499)"' +
                '></path>' +
                '</svg>' +
                '</label>' +
                '</div>' +
                '<div class="col-sm" style="opacity: 1;max-width: 166.31px; min-width: 166.31px">' +
                '<label class="infoLabel infoValor totais2 desconto"><span class="money">R$</span><input  onchange="atualizaPedido()" value="' + desconto + '" type="text" placeholder="-"   class="form-control inValue valorDesconto"> ' +
                '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
                '<defs></defs>' +
                '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
                'transform="translate(2.488 2.499)"' +
                '></path>' +
                '</svg>' +
                '</label>' +
                '</div>' +
                '<div class="col-sm" style="opacity: 1;max-width: 166.31px; min-width: 166.31px">' +

                '<label class="infoLabel infoValor totais2 subTotal"> <span class="money">R$</span><input type="text" value="0"  onchange="atualizaPedido()" class="form-control inValue subTotalPedido"> ' +
                '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
                '<defs></defs>' +
                '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
                'transform="translate(2.488 2.499)"' +
                '></path>' +
                '</svg>' +
                '</label>' +

                '</div>' +
                '<div class="col-sm" style="opacity: 1 ">' +
                '<div class="input-group iconOpaco ico etiquetaRedonda" style="opacity: 1; max-width: 40px !important; max-height: 40px!important;  width: 40px !important;  height: 40px!important;margin: auto 25px !important;">' +
                '<svg   product_code="' + dat[d].product_code + '"   onClick="meRemove($(this))" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 21 21" style="' +
                'margin: auto">' +
                '&gt;' +
                '<defs></defs>' +
                '<path class="a" d="M10.937,16H3.063A2.208,2.208,0,0,1,.875,13.778V2.666H.438a.444.444,0,0,1,0-.889H4.375V1.334A1.324,1.324,0,0,1,5.687,0H8.313A1.324,1.324,0,0,1,9.625,1.334v.444h3.937a.444.444,0,0,1,0,.889h-.437V13.778A2.208,2.208,0,0,1,10.937,16ZM1.75,2.666V13.778a1.325,1.325,0,0,0,1.313,1.334h7.875a1.325,1.325,0,0,0,1.313-1.334V2.666ZM5.687.889a.441.441,0,0,0-.437.445v.444h3.5V1.334A.441.441,0,0,0,8.313.889Zm3.5,11.556A.442.442,0,0,1,8.75,12V5.778a.437.437,0,1,1,.875,0V12A.441.441,0,0,1,9.188,12.445Zm-4.375,0A.441.441,0,0,1,4.375,12V5.778a.437.437,0,1,1,.875,0V12A.442.442,0,0,1,4.812,12.445Z" transform="translate(4 3)"></path>' +
                '</svg>' +
                '</div>' +
                '</div>' +


                '</div>';
        }

        return html

    }




    function pegaLojaNome(id) {
        var lojas = JSON.parse(localStorage.LOJAS_CADASTRADAS)

        for (const k in lojas) {
            if (lojas[k].id == id) {
                return lojas[k].affiliates_business_name.trim()
            }
        }

    }

    function maisProduto(product_data, quantidade) {

        let produtoFinal = FULL_PRICES(product_data)
        let precoVenda = produtoFinal.venda.valor_bruto
        if (produtoFinal.venda.existe_desconto === true && product_data.quantidade >= produtoFinal.venda.minimo_para_desconto) {
            precoVenda = produtoFinal.venda.preco_venda
        }
        var html = '<div class="row radius20 top3 orderContent itemPedido" valor="' + precoVenda + '" caracteristica="' + product_data.caracteristica + '" product_code="' + product_data.product_code + '" anotacao="' + product_data.comentario + '" style="background: #ffffff;">' +
            '<div style="min-width: 300px !important; max-width: 300px !important; opacity: 1;" class="col-sm">' +
            '<div class="row">' +
            '<div getpic="1" style="margin-left: 15px; background: url(' + produtoURL(product_data.product_ean, PRODUCTS_IMAGES).DATA.thumbnail + ');" product_code="8" product_ean="8" class="image img miniatura"></div>' +
            '<div class="itemDetails" style="opacity: 1; margin: auto 25px;">' +
            '<span class="codigoItem">' + product_data.product_code + '</span>' +
            '<br />' +
            '<label class="label" style="line-height: 1.5 !important;"> ' + product_data.product_descricao + ' </label>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '<div class="col-sm" style="opacity: 1; max-width: 166.31px; min-width: 166.31px;">' +
            '<label class="infoLabel infoValor totais2 quantidade">' +
            '<input type="text" value="' + quantidade + '" class="form-control inValue quantidadePedido"  onchange="atualizaPedido()" inputmode="decimal" style="text-align: right;" />' +
            '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
            '<defs></defs>' +
            '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
            'transform="translate(2.488 2.499)" ></path>' +
            '</svg>' +
            '</label>' +
            '</div>' +
            '<div class="col-sm" style="opacity: 1; max-width: 166.31px; min-width: 166.31px;">' +
            '<label class="infoLabel infoValor totais2 valor">' +
            '<span class="money">R$</span>' +
            '<input type="text" value="' + precoVenda + '" class="form-control inValue" inputmode="decimal" style="text-align: right;" />' +
            '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
            '<defs></defs>' +
            '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
            'transform="translate(2.488 2.499)" ></path>' +
            '</svg>' +
            '</label>' +
            '</div>' +
            '<div class="col-sm" style="opacity: 1; max-width: 166.31px; min-width: 166.31px;">' +
            '<label class="infoLabel infoValor totais2 desconto">' +
            '<span class="money">R$</span>' +
            '<input value="0" type="text" placeholder="-" class="form-control  onchange="atualizaPedido()" inValue valorDesconto" inputmode="decimal" style="text-align: right; max-width: 75%; border: none" />' +
            '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
            '<defs></defs>' +
            '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
            'transform="translate(2.488 2.499)" ></path>' +
            '</svg>' +
            '</label>' +
            '</div>' +
            '<div class="col-sm" style="opacity: 1; max-width: 166.31px; min-width: 166.31px;">' +
            '<label class="infoLabel infoValor totais2 subTotal">' +
            '<span class="money">R$</span>' +
            '<input type="text" value="' + (quantidade * precoVenda) + '"  onchange="atualizaPedido()" class="form-control inValue subTotalPedido" inputmode="decimal" style="text-align: right;" />' +
            '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
            '<defs></defs>' +
            '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
            'transform="translate(2.488 2.499)" ></path>' +
            '</svg>' +
            '</label>' +
            '</div>' +
            '<div class="col-sm" style="opacity: 1;">' +
            '<div  class="input-group iconOpaco ico etiquetaRedonda" style="opacity: 1; max-width: 40px !important; max-height: 40px !important; width: 40px !important; height: 40px !important; margin: auto 25px !important;">' +
            '<svg  product_code="' + product_data.product_code + '" onClick="meRemove($(this))" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 21 21" style="' +
            'margin: auto">' +
            '&gt;' +
            '<defs></defs>' +
            '<path class="a" d="M10.937,16H3.063A2.208,2.208,0,0,1,.875,13.778V2.666H.438a.444.444,0,0,1,0-.889H4.375V1.334A1.324,1.324,0,0,1,5.687,0H8.313A1.324,1.324,0,0,1,9.625,1.334v.444h3.937a.444.444,0,0,1,0,.889h-.437V13.778A2.208,2.208,0,0,1,10.937,16ZM1.75,2.666V13.778a1.325,1.325,0,0,0,1.313,1.334h7.875a1.325,1.325,0,0,0,1.313-1.334V2.666ZM5.687.889a.441.441,0,0,0-.437.445v.444h3.5V1.334A.441.441,0,0,0,8.313.889Zm3.5,11.556A.442.442,0,0,1,8.75,12V5.778a.437.437,0,1,1,.875,0V12A.441.441,0,0,1,9.188,12.445Zm-4.375,0A.441.441,0,0,1,4.375,12V5.778a.437.437,0,1,1,.875,0V12A.442.442,0,0,1,4.812,12.445Z" transform="translate(4 3)"></path>' +
            '</svg>' +
            '</div>' +
            '</div>' +
            '</div>';

        return html;
    }

    function meRemove(elemento) {
        //console.log("dsaa")
        bootbox.confirm({

            message: "Deseja remover o produto selecionado?",
            onShow: function () {

                console.clear()
                //console.log("mostrando a modal  correta")
                $(".bootbox-accept").text("REMOVER")
                $(".bootbox-cancel").text("CANCELAR")

                $(".modal-footer").show()
                $(".bootbox-accept").show()


                $(".bootbox-accept").css("float", "right")
                $(".bootbox-cancel").css("float", "right")


                $(this)[0].id = "modalInner3"
                //console.log($(this)[0])
                $("#modalInner3").find(".modal-dialog").addClass("modalCentral")
                $("#modalInner3").find(".modal-dialog").css("height", "350px")
                $("#modalInner3").find(".modal-body").addClass("modalCentralInner")
                $("#modalInner3").find(".modal-body").css("height", "350px")
                $("#modalMain3").addClass("filterBlur");

            },
            callback: function (result) {
                //console.log(result)
                if (result) {
                    elemento.parent().parent().parent().remove()
                    atualizaPedido2();
                    atualizaTotal2();

                    let prd_code = Number(elemento.attr("product_code"))

                    let PEDIDO = JSON.parse(localStorage.PEDIDO_SENDO_EDITADO)
                    let newItens = [];
                    for (const k in PEDIDO) {
                        if (prd_code != Number(PEDIDO[k].product_code)) {
                            newItens.push(PEDIDO[k])
                        }
                    }
                    localStorage.PEDIDO_SENDO_EDITADO = JSON.stringify(newItens)
                    //console.log("NOVOS ITENS", newItens)



                    $("#modalInner3").find(".modal-dialog").removeClass("modalCentral")
                    $("#modalInner3").find(".modal-body").removeClass("modalCentralInner")
                    $("#modalMain3").removeClass("filterBlur")
                    $(".modal-footer").hide()
                    $(".bootbox-accept").hide()
                    $(".bootbox-accept").css("float", "right")

                }
            }
        });

    }

    function atualizaTotal2() {
        $("#totalPedido").val($("#precoCheio").val() - $("#descontoPorItem").val())
    }

    function atualizaPedido2() {

        $(".itemPedido").each(function () {
            var quantidade = $(this).find(".quantidade").find(".inValue").val()
            var preco = $(this).find(".valor").find(".inValue").val()
            var desconto = $(this).find(".desconto").find(".inValue").val()
            if (!Number(quantidade)) {
                quantidade = 0
            }
            if (!Number(preco)) {
                preco = 0
            }
            if (!Number(desconto)) {
                desconto = 0
            }


            $(this).find(".subTotal").find(".inValue").val(Number((quantidade * preco) - desconto))

        })
        $(".inValue").inputmask('decimal', {
            'alias': 'numeric',
            'groupSeparator': ',',
            'autoGroup': true,
            'digits': 2,
            'radixPoint': ".",
            'digitsOptional': false,
            'allowMinus': true,
            'placeholder': '0,00'
        });

        var quantidades = 0,
            descontos = 0,
            total = 0,
            valorCheio = 0;

        $(".valor").each(function () {
            valorCheio += ($(this).parent().parent().find(".quantidade").find(".inValue").val().replace(",", "") * $(this).find(".inValue").val().replace(",", ""))
            ////console.log($(this).parent().parent().find(".quantidade").find(".inValue").val().replace(",",""))
            ////console.log($(this).find(".inValue").val().replace(",",""))
        })
        $(".desconto").each(function () {
            descontos += $(this).find(".inValue").val().replace(",", "")
        })
        $(".subTotal").each(function () {
            total += $(this).find(".inValue").val().replace(",", "")
        })

        $("#precoCheio").val(valorCheio)
        $("#descontoPorItem").val(descontos)

        $("#totalPedido").val(valorCheio - descontos - Number($("#descontoAdicional").text()))

        $(".inValue2").inputmask('decimal', {
            'alias': 'numeric',
            'groupSeparator': ',',
            'autoGroup': true,
            'digits': 2,
            'radixPoint': ".",
            'digitsOptional': false,
            'allowMinus': true,
            'placeholder': '0,00'
        });

        $(".inValue2").change(function () {
            atualizaTotal();
        })



    }

    function setStatusOrder(elemento) {
        var txt = elemento.attr("icon").split("_")[0].split("")

        var status = Number(elemento.attr("status"))
        var color = '#f6b504',
            bkColor = '#FAF3DF'

        var nameStatusFeed = "Pedido recebido"
        switch (status) {
            case 1:
                nameStatusFeed = "Pedido recebido";
                break;
            case 2:
                nameStatusFeed = "Em separação";
                break;
            case 3:
                nameStatusFeed = "Saiu para entrega";
                break;
            case 4:
                nameStatusFeed = "Pedido entregue";
                break;
            default:
                break;
        }
        localStorage.setStatusOrder = 'pedido_' + elemento.attr("icon").split("_")[1]
        var numberOrder = Number(elemento.attr("icon").split("_")[1])
        bootbox.confirm({
            message: "<h3 class='infoLabel' style='font-size: 24px !important'>Deseja alterar o status do pedido<br><br> para <b>'" + nameStatusFeed.toUpperCase() + "'</b>?</h3>",
            buttons: {
                confirm: {
                    label: 'CONFIRMA',
                    className: 'btn-light'
                },
                cancel: {
                    label: 'CANCELA',
                    className: 'btn-light'
                }
            },
            onShow: function () {

                $(this)[0].id = "modalInner"
                $("#modalInner").find(".modal-dialog").addClass("miniModal")
                $("#modalInner").find(".modal-body").addClass("miniModalInner")
                $(".modal-footer").show()
                $(".bootbox-accept").css("float", "right")
                $(".bootbox-cancel").css("float", "right")
                $(".bootbox-body").css("padding", "50px")
                //  $(".bootbox-accept").html("<b style='cursor:pointer'>CONFIRMA</b>")
                //  $(".bootbox-cancel").html("<b style='cursor:pointer'>CANCELA</b>")




            },
            callback: function (result) {
                if (result) {
                    if (Number(status) == 4) {
                        color = 'rgb(80, 198, 130);'
                    }
                    if (status == 4) {
                        $("." + elemento.attr("icon")).parent().addClass("esse2")
                        $("." + elemento.attr("icon")).css("fill", color)
                        $("." + elemento.attr("icon")).parent().removeClass("inativo")
                        // elemento.text(moment(elemento.attr("date")).format("DD/MMM HH:mm"))
                    } else {
                        $("." + elemento.attr("icon")).css("fill", color)
                        $("." + elemento.attr("icon")).parent().addClass("esse")
                        $("." + elemento.attr("icon")).parent().removeClass("inativo")
                        //elemento.text(moment(elemento.attr("date")).format("DD/MMM HH:mm"))
                    }
                    // AQUI ATUALIZE O STATUS DO PEDIDO updateOrderStatus

                    var newsTATUS = status
                    if (status >= 4) {
                        newsTATUS = 4
                    }

                    let PEDIDOS = JSON.parse(localStorage.TODOS_OS_PEDIDOS)
                    for (const k in PEDIDOS) {
                        if (PEDIDOS[k].id == numberOrder) {
                            PEDIDOS[k]['order_status'] = newsTATUS
                        }
                    }

                    localStorage.TODOS_OS_PEDIDOS = JSON.stringify(PEDIDOS)



                    $.ajax({
                        type: "POST",
                        url: mainHost + '/updateOrderStatus',
                        headers: {
                            "x-access-token": localStorage.token,
                        },
                        data: {
                            "ORDER_ID": numberOrder,
                            "ORDER_STATUS": newsTATUS,
                            "DESCRIPTION_STATUS": "Status alterado de " + status + " para " + newsTATUS
                        },
                        success: function (data) {
                            //console.log(data);

                            reloadThis()

                        },
                        error: function (data) {
                            //console.log(data);
                        },
                        complete: function () {

                        },
                    });
                }
            }
        });

    }


    function editaPedidoOrder(elemento) {

        var butao = elemento
        butao.addClass("animated-background")
        var alvo = elemento.attr("alvo")
        let NUMERO_PEDIDO = Number(alvo.split("_")[1])
        //console.log(alvo)
        let PEDIDOS = JSON.parse(localStorage.TODOS_OS_PEDIDOS)
        let ESTE_PEDIDO;
        for (const k in PEDIDOS) {
            if (PEDIDOS[k].id == NUMERO_PEDIDO) {
                ESTE_PEDIDO = PEDIDOS[k]
            }
        }

        var listaProdutos = JSON.parse(ESTE_PEDIDO.order_conteudo)

        //console.log("vou tentar")
        $.ajax({
            url: mainHost + '/getProductsFromOrder',
            headers: {
                "x-access-token": localStorage.token,
                "affiliate_id": 1
            },
            data: {
                "product_affiliate_id": localStorage.AFFILIATE_ID,
                "listaProdutos": listaProdutos
            },
            type: 'POST',
            success: async function (dat) {
                //console.log(dat)
                let orders = []

                for (const k in dat) {
                    let prdFim = FULL_PRICES(dat[k])
                    orders.push({
                        ...dat[k],
                        minimo_para_desconto: prdFim.venda.minimo_para_desconto,
                        valor: prdFim.venda.valor_bruto
                    })
                }
                localStorage.PEDIDO_SENDO_EDITADO = JSON.stringify(orders)

                var html = '<div style="max-height: 95vh" id="orderDetails">' +
                    '<div style="margin-top: 0%;min-height: 60vh" class="row">' +
                    '<div class="col-md-12" style="max-width: 90%; margin: auto; opacity: 1;min-height: 94vh">' +
                    '<div class="card card-tasks radius20" style="cursor: pointer; background: #fafafd;min-height: 94vh">' +
                    '<div class="card-header" style="border-radius: 20px 20px 0 0; border-bottom: 1px solid #efefef; background: #ffffff; padding: 1%; cursor: pointer; max-height: 110px;">' +
                    '<label style="margin-left: 5%; font-size: 1.3rem !important" class="label">Pedido<br><h3 style="font-size: 2rem !important; margin-top: -12%" class="SEO">#<span class="numeroPedido">' + alvo.replace("pedido_", "") + '</span></h3></label>' +

                    '<div numero_pedido="' + NUMERO_PEDIDO + '"  class="finEdit">' +
                    '<svg  xmlns="http://www.w3.org/2000/svg" style="margin:auto 5px auto 30px;" width="20" height="20" viewBox="0 0 20 20">' +
                    '<defs></defs>' +
                    '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
                    'transform="translate(2.488 2.499)"' +
                    '></path>' +
                    '</svg>' +
                    '<label style="margin: auto; cursor: pointer" class="label" id="fimEdicao1">Finalizar edição</label>' +
                    '</div>' +
                    '<div  class="morePRD">' +
                    '<svg id="_01_Icons_Line_plus-circle" style="margin:auto 5px auto 30px;" data-name="01) Icons / Line /  plus-circle" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">' +
                    '<path id="plus-circle" d="M10.5,21A10.5,10.5,0,0,1,3.075,3.075,10.5,10.5,0,1,1,10.5,21Zm0-20A9.5,9.5,0,1,0,20,10.5,9.511,9.511,0,0,0,10.5,1Zm0,14a.5.5,0,0,1-.5-.5V11H6.5a.5.5,0,0,1,0-1H10V6.5a.5.5,0,0,1,1,0V10h3.5a.5.5,0,1,1,0,1H11v3.5A.5.5,0,0,1,10.5,15Z" transform="translate(2 2)" fill="white"/>' +
                    '</svg>' +
                    '<label style="margin: auto; cursor: pointer; color: white !important" id="addProduto" class="label">Novo produto</label>' +
                    '</div>' +

                    '</div>' +
                    '<div class="card-body container" style="max-width: 95%;max-height: 40px;justify-content: center;text-align: center;">' +
                    '<div style="max-height: 40px;    margin: auto 25px;" class="row">' +
                    '<div style="min-width: 300px !important; opacity: 1;" class="col-sm">' +
                    '<label class="infoLabel">Produto e descrição</label>' +
                    '</div>' +
                    '<div class="col-sm" style="opacity: 1;">' +
                    '<label class="infoLabel">Quantidade</label>' +
                    '</div>' +
                    '<div class="col-sm" style="opacity: 1;">' +
                    '<label class="infoLabel">Preço</label>' +
                    '</div>' +
                    '<div class="col-sm" style="opacity: 1;">' +
                    '<label class="infoLabel">Desconto</label>' +
                    '</div>' +
                    '<div class="col-sm" style="opacity: 1;">' +
                    '<label class="infoLabel">Subtotal</label>' +
                    '</div>' +
                    '<div class="col-sm" style="opacity: 1;">' +
                    '</div>' +
                    '</div>' +
                    '<div class="conteudoPedido verticalScroll" style="max-height: 66vh;margin-top: 1vh;">' + listaItensPedidos(dat) +
                    '</div>' +
                    '</div>' +
                    '<div class="card-footer editaPedidosfooter">' +
                    '<div class="row">' +
                    '<div class="col-md-4">' +
                    '<div style="max-width: 90%" class="container">' +
                    '<div class="row">' +
                    '<label style="    margin: -2px 0px auto auto;    font-size: 1rem;" class="label">Produtos:<br></label>' +
                    '<label class="infoLabel infoValor totais"> <span class="money2">R$</span><input readonly="true" type="text" id="precoCheio" value="5.5" class="form-control inValue2"> ' +
                    /*
                    '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
                    '<defs></defs>' +
                    '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
                    'transform="translate(2.488 2.499)"' +
                    '></path>' +
                    '</svg>' +
                    */
                    '</label>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '<div class="col-md-4">' +
                    '<div style="max-width: 90%" class="container">' +
                    '<div class="row">' +
                    '<label style="    margin: -2px 0px auto auto;    font-size: 1rem;" class="label">Descontos:<br></label>' +
                    '<label class="infoLabel infoValor totais"> <span class="money2">-R$</span><input readonly="true" type="text" id="descontoPorItem" value="0.00" class="form-control inValue2"> ' +
                    /*
                                            '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
                                            '<defs></defs>' +
                                            '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
                                            'transform="translate(2.488 2.499)"' +
                                            '></path>' +
                                            '</svg>' +
                                            */
                    '</label>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '<div class="col-md-4">' +
                    '<div style="max-width: 90%" class="container">' +
                    '<div class="row">' +
                    '<label style="    margin-left: 15%;font-size: 1.2rem;float: right;text-align: right;margin-right: -1%;margin-top: -2%;font-weight: bold;" class="label">Total:<br></label>' +
                    '<label class="infoLabel infoValor totais" style="font-weight: bold !important"> <span class="money2">R$</span><input readonly="true" style="font-weight: bold !important" type="text" id="totalPedido" value="5.5" class="form-control inValue2"> ' +
                    /*
                                            '<svg xmlns="http://www.w3.org/2000/svg" style="margin: 6% auto;" width="20" height="20" viewBox="0 0 20 20">' +
                                            '<defs></defs>' +
                                            '<path class="a" d="M12.929,15H2.083A2.086,2.086,0,0,1,0,12.917V2.084A2.086,2.086,0,0,1,2.083,0H7.928a.417.417,0,0,1,0,.833H2.083a1.252,1.252,0,0,0-1.25,1.25V12.917a1.252,1.252,0,0,0,1.25,1.25H12.929a1.251,1.251,0,0,0,1.25-1.25V7.084a.417.417,0,0,1,.834,0v5.833A2.086,2.086,0,0,1,12.929,15Zm-5-5.833H6.262a.417.417,0,0,1-.417-.416V7.084a.417.417,0,0,1,.122-.295L12.633.122a.417.417,0,0,1,.59,0L14.89,1.789a.416.416,0,0,1,0,.59L8.223,9.046A.414.414,0,0,1,7.928,9.167Zm5-8.161h0l-6.25,6.25V8.334H7.756l6.25-6.25L12.929,1.007Z"' +
                                            'transform="translate(2.488 2.499)"' +
                                            '></path>' +
                                            '</svg>' +
                                            */
                    '</label>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
                var thisModal = bootbox.alert({
                    message: html,
                    onShow: async function () {


                        butao.removeClass("animated-background")
                        $(".finEdit").click(async function () {

                            let NUMERO_PEDIDO = Number($(this).attr("numero_pedido"))

                            var pedido2 = JSON.parse(localStorage.PEDIDO_SENDO_EDITADO)

                            $(".itemPedido").each(function () {
                                let PRD_CODE = Number($(this).attr("product_code"))
                                let isNew = true
                                for (const k in pedido2) {
                                    if (pedido2[k].product_code === PRD_CODE) {
                                        pedido2[k]['quantidade'] = Number($(this).find(".quantidadePedido").val())
                                        isNew = false
                                    }
                                }
                                if (isNew === true) {
                                    let PRD_SEARCH = JSON.parse(localStorage.resultSearch)
                                    let thisPRD;
                                    for (const a in PRD_SEARCH) {
                                        if (PRD_CODE === PRD_SEARCH[a].product_code) {
                                            thisPRD = PRD_SEARCH[a]
                                        }
                                    }
                                    let produtoFinal = FULL_PRICES(thisPRD)
                                    let newwLine = {
                                        ...thisPRD,
                                        quantidade: Number($(this).find(".quantidadePedido").val()),
                                        caracteristica: "",
                                        comentario: "",
                                        minimo_para_desconto: 0,
                                        valor: produtoFinal.venda.valor_bruto
                                    }
                                    pedido2.push(newwLine)
                                }

                            })
                            localStorage.PEDIDO_SENDO_EDITADO = JSON.stringify(pedido2)
                            //console.log(pedido2)

                            let PEDIDOS = JSON.parse(localStorage.TODOS_OS_PEDIDOS)

                            for (const k in PEDIDOS) {
                                if (PEDIDOS[k].id == NUMERO_PEDIDO) {
                                    //console.log("achei o pedido", PEDIDOS[k])                               
                                    PEDIDOS[k]['order_conteudo'] = JSON.stringify(pedido2)
                                }
                            }
                            localStorage.TODOS_OS_PEDIDOS = JSON.stringify(PEDIDOS)
                            updateTotalPedidos()

                            let PEDIDOS2 = JSON.parse(localStorage.TODOS_OS_PEDIDOS)
                            let qualPedido;
                            for (const k in PEDIDOS2) {
                                if (PEDIDOS2[k].id == NUMERO_PEDIDO) {
                                    //console.log("achei o pedido2", PEDIDOS2[k]) 
                                    qualPedido = PEDIDOS2[k]
                                }
                            }

                            if (qualPedido != undefined) {
                                await salvaUmUnico(qualPedido)
                            }


                            if (pedido2.length > 0) {
                                jQuery(function ($) {


                                    $.ajax({
                                        type: "POST",
                                        url: 'https://api-smartcomerci.com.br:9090/updateOrderDetails',
                                        headers: {
                                            "x-access-token": localStorage.token,
                                        },
                                        data: {
                                            "ITENS_PEDIDO": JSON.stringify(pedido2),
                                            "NUM_PEDIDO": Number($(".numeroPedido").text()),
                                            "VALOR_PEDIDO": $("#totalPedido").val().replace(",", "")
                                        },
                                        success: function (dt) {
                                            //console.log(dt)

                                            localStorage.setStatusOrder = 'pedido_' + $(".numeroPedido").text()
                                            reloadThis()
                                            $(".close").click()
                                        },
                                        error: function (dt) {
                                            //console.log(dt)

                                            informar("alert-primary", "Algo saiu errado!<br>", 3000)
                                        },
                                        complete: function () { },
                                    });
                                });

                            } else {
                                alert("Pedido vazio")
                                informar("alert-primary", "Pedido vazio!<br>", 3000)
                            }




                        })

                        $(".meExclui").click(function () {
                            $(this).parent().parent().parent().remove()
                        })



                        $(".miniatura").each(function () {
                            if ($(this).attr("getPic") == "0") {
                                getImageFromEAN($(this).attr("product_ean"), $(this).attr("product_code"), $(this))
                                $(this).attr("getPic", "1")
                            }

                        })

                        $(".totais2").click(function () {

                            $(".totais2").removeClass("bordaDourada")
                            $(".totais2").removeClass("dourado")

                            $(this).addClass("bordaDourada")
                            $(this).addClass("dourado")
                            $(this).attr("contentEditable", "true")
                        })
                        $(".totais").click(function () {

                            $(".totais").removeClass("bordaDourada")
                            $(".totais").removeClass("dourado")

                            $(this).attr("contentEditable", "true")
                            $(this).addClass("bordaDourada")
                            $(this).addClass("dourado")
                        })



                        atualizaPedido();



                        setTimeout(() => {
                            atualizaTotal();
                        }, 1000)
                        $("#addProduto").click(function (e) {
                            e.stopPropagation()
                            e.preventDefault()
                            //console.log("tentei")
                            var html = '<div style="max-width:100% " class="container">' +

                                '<h4 style="font-size: 24px !important; text-align: center !important" class="infoLabel">Adicionar Produto</h4>' +


                                '<hr class="baixoCabecalho" style="position: fixed;top: 165px !important;right: calc((100% - 648px) / 2) !important;width: 648px;box-shadow: 2px 2px 2px silver;/* margin: auto; */">' +
                                '<div style="padding:0 2%; margin-top: 45px" class="row">' +

                                '<div style="margin: auto; border : none"   class="row grupoCategorias drop ">' +
                                '<div class="col-md-12">' +
                                '<div class="input-group">' +
                                '<input type="text" style="min-width: 300px;font-size: 1.3rem" value="" id="buscaAddProduto1" class="form-control buscaAddProduto" placeholder="Busque por produtos">' +
                                '<div class="input-group-append">' +
                                '<div class="input-group-text">' +
                                '<svg style="color: #f6b504; font-weight: bold;" class="svg-inline--fa fa-search fa-w-16" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">' +
                                '<path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path>' +
                                '</svg>' +

                                '</div>' +
                                '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div style="max-height: 300px;" class="col-md-12 listaSuspensa verticalScroll ">' +


                                '</div>' +
                                '</div>' +
                                "</div>" +
                                "</div>";


                            bootbox.confirm({
                                message: html,
                                onShow: function () {
                                    //console.log("linha 1027")


                                    $(".bootbox-accept").text("FINALIZAR")
                                    $(".bootbox-cancel").text("CANCELAR")

                                    $(".modal-footer").show()
                                    $(".bootbox-accept").show()


                                    $(".bootbox-accept").css("float", "right")
                                    $(".bootbox-cancel").hide()



                                    thisModal[0].id = "modalMain"
                                    $(this)[0].id = "modalInner"
                                    $("#modalInner").find(".modal-dialog").addClass("modalCentral")
                                    $("#modalInner").find(".modal-body").addClass("modalCentralInner")
                                    $("#modalMain").addClass("filterBlur")
                                    $(".buscaAddProduto").change(function () {
                                        adicionaProduto($("#buscaAddProduto1").val(), 30)
                                    })



                                    function adicionaProduto(texto, limite) {

                                        var loading = '<div style="width: 50px;height: 50px; margin: auto 25px" class="spinner-border text-warning" role="status"><span class="sr-only">Loading...</span></div>'
                                        $(".listaSuspensa").html(loading)
                                        $.ajax({
                                            type: 'POST',
                                            url: mainHost + '/productSearch',
                                            data: {
                                                "totalItems": limite,
                                                "lastID": 0,
                                                "product_code": texto,
                                                "product_affiliate_id": localStorage.AFFILIATE_ID,
                                                "product_site_name": texto
                                            },
                                            success: function (data) {
                                                //console.log(data)
                                                localStorage.resultSearch = JSON.stringify(data)

                                                $(".listaSuspensa").html("")
                                                for (const k in data) {
                                                    let produtoFinal = FULL_PRICES(data[k])
                                                    let precoVenda = produtoFinal.venda.valor_bruto

                                                    var html =
                                                        '<div  class="listaProdSearch ">' +
                                                        '<div  style="max-width: 50px; margin: auto" class="col">' +
                                                        '<div style="background: url(' + produtoURL(data[k].product_ean, PRODUCTS_IMAGES).DATA.thumbnail + ')" class="bkgImagem"></div>' +
                                                        '</div>' +
                                                        '<div  style="max-width: 50px; margin: auto" class="col">' +
                                                        '<label class="textoCodigo1">' + data[k].product_code + '</label>' +
                                                        '</div>' +
                                                        '<div  style="width: 200px; margin: auto" class="col">' +
                                                        '<label class="textoDesc1">' + data[k].product_site_name + '</label>' +
                                                        '</div>' +
                                                        '<div  style="width: 60px; margin: auto" class="col">' +
                                                        '<label class="textoPreco11">' + produtoFinal.venda.valor_bruto + '</label>' +
                                                        '</div>' +
                                                        '<div  style="width: 170px; margin: auto" class="col">' +
                                                        '<div myPicture="' + produtoURL(data[k].product_ean, PRODUCTS_IMAGES).DATA.thumbnail + '" product_code="' + data[k].product_code + '" onClick="addPrdIn($(this))" class="prodSearchBtn PRDseleciona2">' +
                                                        '<label class="prodSearchTxt">Adicionar</label>' +
                                                        '</div>' +
                                                        '</div>' +
                                                        '</div>';

                                                    /*
                                                    '<div product_code="' + data[k].product_code + '" class="card PRDseleciona2" style="width: 23%; border-radius: 15px; margin-left: 10px; max-heigth: 60vh; cursor: pointer">' +
                                                        '<ul class="list-group list-group-flush">' +
                                                        '<li class="list-group-item noBorder" style="border-bottom: none">' +
                                                        iconGridMini2 +
                                                        '<label class="numberCat">' + data[k].product_code + '</label>' +
    
                                                        "</li>" +
    
                                                        '<li class="list-group-item  noBorder mainPicture"  style="border-bottom: none">' +
                                                        '<img class="productImageThumb" src="' + produtoURL(data[k].product_ean, PRODUCTS_IMAGES).DATA.thumbnail + '" /> ' +
                                                        "</li>" +
                                                        '<li style="line-height: 0.2;" class="list-group-item noBorder"  style="border-top: none">' +
                                                        '<h3 class="tituloProdutoMini">' + data[k].product_site_name + '</h3>' +
                                                        "</li>" +
    
                                                        "</ul>" +
                                                        "</div>";
                                                    */

                                                    $(".listaSuspensa").append(html)
                                                }



                                            },
                                            error: function (data) {
                                                ////console.log(data)
                                            },
                                            complete: function () {
                                                // ao final da requisição...
                                            }
                                        });

                                    }

                                },
                                callback: function () {
                                    $("#modalInner").find(".modal-dialog").removeClass("modalCentral")
                                    $("#modalInner").find(".modal-body").removeClass("modalCentralInner")
                                    $("#modalMain").removeClass("filterBlur")
                                }
                            })

                        })



                    },
                    callback: function () {
                        $("#superIcons").removeClass("iconOnModal")
                        $("#hd").removeClass(" orderOnModal")
                        $(".orderBody2").addClass("orderBody")
                        $(".orderBody2").removeClass("orderBody2")

                        ////console.log('The styles was removed!');

                    }
                })

                $(".modal-footer").hide()
                $(".modal-body").css("max-height", "96vh")

                // $(".bootbox-body").css("background", "#fafafd")

            },
            error: function (dat) {
                //console.log(dat)
                if (dat.responseJSON.message.indexOf("token") > -1) {
                    //console.log("Necessário fazer login!<br>" + dat.responseJSON.message)
                    setTimeout(() => {
                        location.replace("/cms-login")
                    }, 2000)

                } else {
                    //console.log("Algo saiu errado!<br>" + dat.responseJSON.message)
                }

            }
        });




    }
    var conti = 0

    function copyToClipboard(text, elemento) {
        //console.log(text)
        var sampleTextarea = '<input type="text" id="txt' + conti + '" value="' + text + '" />';
        elemento.append(sampleTextarea);
        //console.log('#txt' + conti)
        $('#txt' + conti).select();
        document.execCommand("copy");
        $('#txt' + conti).remove();
        informar("alert-primary", "Texto copiado para área de transferência!", 3000)
        conti++
    }

    function clientInformation(elemento) {


        var nome = elemento.attr("users_client_name")
        var email = elemento.attr("users_client_mail")
        var telefone = elemento.attr("users_client_telefone")
        var cpf = elemento.attr("users_client_cpf")
        var endereco = elemento.attr("users_client_endereco")

        var cep = elemento.attr("users_client_cep")
        var bairro = elemento.attr("users_client_bairro")
        var cidade = elemento.attr("users_client_cidade")
        var listaCompras = elemento.attr("users_client_listas_compras").split(",")




        var html = '<div style="max-width:100% " class="container">' +

            '<h4 style="font-size: 24px !important;margin: 25px auto;" class="infoLabel">Informações do Cliente</h4>' +


            '<hr class="baixoCabecalho" style="position: fixed;top: 165px !important;right: calc((100% - 648px) / 2) !important;width: 648px;box-shadow: 2px 2px 2px silver;/* margin: auto; */">' +
            '<div style="padding:0 2%; margin-top: 65px" class="row">' +

            '<div style="width: 100%" class="row">' +
            '<div style="border-radius: 100%; max-height: 35px; max-width: 35px; margin: auto 5% !important; opacity: 1;" class="input-group iconLogistica ico inativo iconOpaco">' +
            '<svg xmlns="http://www.w3.org/2000/svg" style="margin: auto; fill: #222B45 !important; " width="20" height="20" viewBox="0 0 20 20">' +
            '<defs></defs>' +
            '<g transform="translate(-2 -2)">' +
            '<path class="a" d="M10,20A10,10,0,1,1,20,10,10.011,10.011,0,0,1,10,20ZM10,1a9,9,0,1,0,7.794,4.5A9.01,9.01,0,0,0,10,1Zm1.5,16h-3A5.506,5.506,0,0,1,3,11.5a.5.5,0,0,1,.5-.5h13a.5.5,0,0,1,.5.5A5.506,5.506,0,0,1,11.5,17ZM9,15a.994.994,0,0,0-1,.973A4.6,4.6,0,0,0,8.5,16h3a4.4,4.4,0,0,0,.524-.031.994.994,0,0,0-1-.969H9ZM4.027,12a4.53,4.53,0,0,0,2.99,3.75A2,2,0,0,1,9,14h2.025a2,2,0,0,1,1.983,1.741A4.531,4.531,0,0,0,15.973,12H4.027ZM13,9a1,1,0,1,1,1-1A1,1,0,0,1,13,9ZM7,9A1,1,0,1,1,8,8,1,1,0,0,1,7,9Z" transform="translate(2 2)"></path>' +
            '</g>' +
            '</svg>' +
            '</div>' +
            '<label class="label interna" style="opacity: 1;     margin: auto 0 !important;">' + nome + '</label>' +
            '</div>' +
            '<hr>' +
            '<div style="width: 90%; padding: 25px" class="container">' +
            '<div style="width: 100%; padding: 25px" class="row">' +
            '<div class="col-md-8">' +
            '<div class="row ">' +
            '<label class="infoClientContent_titulo" style="opacity: 1;">Email</label><label class="infoClientContent_conteudo" style="opacity: 1;">' + email + '</label>' +
            '</div>' +
            '</div>' +
            '<div class="col-md-3">' +
            '<div class="row">' +
            '<div class="infoClientContent_copiar">' +
            copiar +
            '<label onclick="copyToClipboard(\'' + email + '\', $(this))" class="infoClientContent_copiarTexto" style="opacity: 1;">Copiar</label>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +

            '<div style="width: 100%; padding: 25px" class="row">' +
            '<div class="col-md-8">' +
            '<div class="row ">' +
            '<label class="infoClientContent_titulo" style="opacity: 1;">Telefone</label><label class="infoClientContent_conteudo" style="opacity: 1;">' + telefone + '</label>' +
            '</div>' +
            '</div>' +
            '<div class="col-md-3">' +
            '<div class="row">' +
            '<div class="infoClientContent_copiar">' +
            copiar +
            '<label onclick="copyToClipboard(\'' + telefone + '\', $(this))" class="infoClientContent_copiarTexto" style="opacity: 1;">Copiar</label>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +

            '<div style="width: 100%; padding: 25px" class="row">' +
            '<div class="col-md-8">' +
            '<div class="row ">' +
            '<label class="infoClientContent_titulo" style="opacity: 1;">CPF</label><label class="infoClientContent_conteudo" style="opacity: 1;">' + cpf + '</label>' +
            '</div>' +
            '</div>' +
            '<div class="col-md-3">' +
            '<div class="row">' +
            '<div class="infoClientContent_copiar">' +
            copiar +
            '<label onclick="copyToClipboard(\'' + cpf + '\', $(this))" class="infoClientContent_copiarTexto" style="opacity: 1;">Copiar</label>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +



            '<div style="width: 100%; padding: 25px" class="row">' +
            '<div class="col-md-8">' +
            '<div class="row ">' +
            '<label class="infoClientContent_titulo" style="opacity: 1;">Endereço</label><label class="infoClientContent_conteudo" style="opacity: 1;">' + endereco + ',' + cep + ',' + bairro + ',' + cidade + '</label>' +
            '</div>' +
            '</div>' +
            '<div class="col-md-3">' +
            '<div class="row">' +
            '<div class="infoClientContent_copiar">' +
            copiar +
            '<label onclick="copyToClipboard(\'' + endereco + ',' + cep + ',' + bairro + ',' + cidade + '\', $(this))" class="infoClientContent_copiarTexto" style="opacity: 1;">Copiar</label>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +


            '</div>' +



            "</div>" +
            "</div>";


        var modalzona = bootbox.alert({
            message: html,
            onShow: function () {

                $(this)[0].id = "modalInner5"
                $("#modalInner5").find(".modal-dialog").addClass("modalCentral")
                $(".modal-content").css("border", "none !important")
                $("#modalInner5").find(".modal-content").addClass("clienteInforma")

            },
            callback: function () {
                $("#modalInner").find(".modal-dialog").removeClass("modalCentral")


            }
        })
    }

    function deletarPedidoOrder(elemento) {
        var numberOrder = Number(elemento.attr("pedido"))
        bootbox.confirm({
            message: "<h3 class='infoLabel' style='font-size: 24px !important'>Deseja cancelar <br><br>o pedido: <b>'" + elemento.attr("pedido") + "'</b>?</h3>",
            buttons: {
                confirm: {
                    label: 'CONFIRMA',
                    className: 'btn-light'
                },
                cancel: {
                    label: 'CANCELA',
                    className: 'btn-light'
                }
            },
            onShow: function () {

                $(this)[0].id = "modalInner"
                $("#modalInner").find(".modal-dialog").addClass("miniModal")
                $("#modalInner").find(".modal-body").addClass("miniModalInner")
                $(".modal-footer").show()
                $(".bootbox-accept").css("float", "right")
                $(".bootbox-cancel").css("float", "right")
                $(".bootbox-body").css("padding", "50px")

            },
            callback: function (result) {
                if (result) {
                    //console.log("deletando pedido...")

                    mudaStatusPedido(numberOrder, 0, 'ativo')
                    elemento.hide()
                    elemento.parent().find(".voltarPedido").show()

                }
            }
        });
    }

    function reativarPedidoOrder(elemento) {
        var numberOrder = Number(elemento.attr("pedido"))
        bootbox.confirm({
            message: "<h3 class='infoLabel' style='font-size: 24px !important'>Deseja reativar <br><br>o pedido: <b>'" + elemento.attr("pedido") + "'</b>?</h3>",
            buttons: {
                confirm: {
                    label: 'CONFIRMA',
                    className: 'btn-light'
                },
                cancel: {
                    label: 'CANCELA',
                    className: 'btn-light'
                }
            },
            onShow: function () {

                $(this)[0].id = "modalInner"
                $("#modalInner").find(".modal-dialog").addClass("miniModal")
                $("#modalInner").find(".modal-body").addClass("miniModalInner")
                $(".modal-footer").show()
                $(".bootbox-accept").css("float", "right")
                $(".bootbox-cancel").css("float", "right")
                $(".bootbox-body").css("padding", "50px")

            },
            callback: function (result) {
                if (result) {
                    //console.log("deletando pedido...")

                    mudaStatusPedido(numberOrder, 1, 'cancelado')
                    elemento.hide()
                    elemento.parent().find(".cancelarPedido").show()

                }
            }
        });
    }

    function pdfPedidoOrder(elemento, funcao) {
        var pedidoN = Number(elemento.attr("pedido"))
        var pedidoB = elemento.attr("pedido")
        window.scrollTo(0, 0);
        setTimeout(() => {
            $.ajax({
                type: "POST",
                url: mainHost + '/getById',
                headers: {
                    "x-access-token": localStorage.token,
                },
                data: {
                    "table": 'orders',
                    "id_name": 'id',
                    "id_value": pedidoN
                },
                success: function (data) {
                    //console.log('dados pedido');
                    //console.log(data);
                    localStorage.PEDIDO_PDF = JSON.stringify(data)

                    var listaItens = JSON.parse(data[0].order_conteudo)
                    localStorage.CLIENTE_PDF = JSON.stringify(listaItens)
                    //console.log('dados itens');
                    //console.log(listaItens);
                    window.scrollTo(0, 0);
                    setTimeout(() => {
                        $(".modalPDF").show()
                        $("body").css("overflow", "hidden")

                        if (funcao == "print") {
                            $("#framePDF")[0].contentWindow.print()
                        } else {
                            $("#framePDF")[0].contentWindow.imprime()
                        }
                    }, 1500)
                    window.scrollTo(0, 0);
                    /*
                    $.ajax({
                        type: "GET",
                        url: '../pdf/myPDF.htm',
                        data: '',
                        success: function(data) {
                            CriaPDF(data, $("#nomeTotalLoja").text())
                        },
                        error: function(data) {
                            //console.log(data);
                        },
                        complete: function() {
    
                        },
                    });
                    */


                },
                error: function (data) {
                    //console.log(data);
                },
                complete: function () {

                },
            });

        }, 1500)


    }

    function atualizaPedido() {

        $(".itemPedido").each(function () {
            var quantidade = $(this).find(".quantidade").find(".inValue").val()
            var preco = $(this).find(".valor").find(".inValue").val()
            var desconto = $(this).find(".desconto").find(".inValue").val()
            if (!Number(quantidade)) {
                quantidade = 0
            }
            if (!Number(preco)) {
                preco = 0
            }
            if (!Number(desconto)) {
                desconto = 0
            }


            $(this).find(".subTotal").find(".inValue").val(Number((quantidade * preco) - desconto))

        })
        $(".inValue").inputmask('decimal', {
            'alias': 'numeric',
            'groupSeparator': ',',
            'autoGroup': true,
            'digits': 2,
            'radixPoint': ".",
            'digitsOptional': false,
            'allowMinus': true,
            'placeholder': '0,00'
        });

        var quantidades = 0,
            descontos = 0,
            total = 0,
            valorCheio = 0;

        $(".valor").each(function () {
            valorCheio += ($(this).parent().parent().find(".quantidade").find(".inValue").val().replace(",", "") * $(this).find(".inValue").val().replace(",", ""))
            ////console.log($(this).parent().parent().find(".quantidade").find(".inValue").val().replace(",",""))
            ////console.log($(this).find(".inValue").val().replace(",",""))
        })
        $(".desconto").each(function () {
            descontos += Number($(this).find(".inValue").val().replace(",", ""))
        })
        $(".subTotal").each(function () {
            total += $(this).find(".inValue").val().replace(",", "")
        })

        $("#precoCheio").val(valorCheio)
        $("#descontoPorItem").val(descontos)


        $("#totalPedido").val(valorCheio - descontos - Number($("#descontoAdicional").text()))

        $(".inValue2").inputmask('decimal', {
            'alias': 'numeric',
            'groupSeparator': ',',
            'autoGroup': true,
            'digits': 2,
            'radixPoint': ".",
            'digitsOptional': false,
            'allowMinus': true,
            'placeholder': '0,00'
        });




    }

    function atualizaTotal() {
        $("#totalPedido").val(Number($("#precoCheio").val()) - Number($("#descontoPorItem").val()))
    }

    //$(".PRDseleciona2").click(function(e) {
    function addPrdIn(elemento) {
        //console.log("sdfdsfdf cliequei")
        var dados = JSON.parse(localStorage.resultSearch)
        var prd_code = elemento.attr("product_code")
        var codigo_produto = Number(elemento.attr("product_code"))
        var meuCard = '<img style="max-width: 80%; margin: auto" src="' + elemento.attr(" myPicture") + '" />'
        for (const k in dados) {

            if (Number(dados[k].product_code) == codigo_produto) {
                bootbox.confirm({
                    message: '<h3 style="font-size: 24px !important" class="infoLabel">Adicione a quantidade desejada:</h3> <hr> <label class = "infoLabel" > Produto: & nbsp; <b> ' + dados[k].product_descricao + ' </b></label > ' +
                        '<br><label class="infoLabel">Preço:&nbsp;<b>R$ ' + dados[k].product_valor + ' </b></label>' +
                        '<div class="container" style="max-width: 50%; ">' +
                        meuCard +
                        '</div>' +
                        '<br><label class="infoLabel" style="display: inline-flex;width: 50%;margin: 50px 25%; font-size: 24px !important">Quantidade:&nbsp;<input type="number" value="1" placeholder="0" id="qtdAdd1" class="form-control" style="max-width: 150px; float: right; font-size: 24px !important;    margin: -15px auto;"></label>',
                    onShow: function () {

                        $(".bootbox-accept").text("FINALIZAR")
                        $(".bootbox-cancel").hide()

                        $(".modal-footer").show()
                        $(".bootbox-accept").show()


                        $(".bootbox-accept").css("float", "right")
                        $(".bootbox-cancel").css("float", "right")




                        $(this)[0].id = "modalInner2"
                        $("#modalInner2").find(".modal-dialog").addClass("modalCentral")
                        $("#modalInner2").find(".modal-body").addClass("modalCentralInner")
                        $("#modalMain2").addClass("filterBlur");


                    },
                    callback: function (result) {
                        if (result) {
                            $(".conteudoPedido").prepend(maisProduto(dados[k], $("#qtdAdd1").val()))
                            $("#modalInner2").find(".close").click()

                            atualizaPedido();
                            atualizaTotal();
                        }




                    }
                })
                break;
            }
        }

    }




    function mudaStatusPedido(numberOrder, newsTATUS, status) {
        $.ajax({
            type: "POST",
            url: mainHost + '/updateOrderStatus',
            headers: {
                "x-access-token": localStorage.token,
            },
            data: {
                "ORDER_ID": numberOrder,
                "ORDER_STATUS": newsTATUS,
                "DESCRIPTION_STATUS": "Status alterado de " + status + " para " + newsTATUS
            },
            success: function (data) {
                //console.log(data);

                reloadThis()

            },
            error: function (data) {
                //console.log(data);
            },
            complete: function () {

            },
        });
    }

    function marka(element) {
        //console.log(element)
        $(".checka").each(function () {
            $(this)[0].checked = element[0].checked
        })
        if (element[0].checked == true) {
            $(".menuPedidos").addClass("activeClick")
        }
    }

    $(".checka").change(function () {
        var isOk = false
        $(".checka").each(function () {
            if ($(this)[0].checked == true) {
                isOk = true
            }
        })
        if (isOk == true) {
            $(".menuPedidos").addClass("activeClick")
        }
    })



    function allPDF(element) {
        var listCheckados = []
        $(".checka").each(function () {
            if ($(this)[0].checked == true) {
                listCheckados.push($(this))
            }
        })
        //console.log("pdf/imprimir", listCheckados)
    }

    function allCancel(element) {
        var listCheckados = []
        $(".checka").each(function () {
            if ($(this)[0].checked == true) {
                listCheckados.push($(this))
            }
        })
        //console.log("cancelar", listCheckados)
    }



    async function clicaEmOrdem(elemento) {
        $("body").css("filter", "blur(5px)")
        await updateTotalPedidos()
        var thisOrder = Number(elemento.find(".modalCount").text())
        $(".order").removeClass("orderActive");
        elemento.addClass("orderActive");
        var alvo = elemento.attr("alvo")
        var pedidoN = Number(alvo.split("_")[1])
        let PEDIDOS = JSON.parse(localStorage.TODOS_OS_PEDIDOS)
        let ESTE_PEDIDO;
        for (const k in PEDIDOS) {
            if (Number(PEDIDOS[k].id === pedidoN)) {
                ESTE_PEDIDO = PEDIDOS[k]
            }
        }
        //console.log('ESTE_PEDIDO', ESTE_PEDIDO)
        var listaProdutos = JSON.parse(ESTE_PEDIDO.order_conteudo)
        $("#framePDF").attr("src", "")


        localStorage.PEDIDO_PDF = JSON.stringify(ESTE_PEDIDO)


        localStorage.CLIENTE_PDF = JSON.stringify(listaProdutos)
        $("#framePDF").attr("src", "../pdf/myPDF.htm")

        setTimeout(() => {

            $.ajax({
                type: "POST",
                url: "https://api-smartcomerci.com.br:9090/productsOrderByListOrder",
                headers: {
                    "x-access-token": localStorage.token,
                },
                data: {
                    "product_affiliate_id": localStorage.AFFILIATE_ID,
                    "listaProdutos": listaProdutos
                },
                success: function (html2) {


                    var onde = "#listagem_" + alvo
                    onde = onde.replace("_pedido", "")
                    //console.log("onde ++++++++++++++")
                    //console.log(html2)
                    //console.log(onde)
                    $(onde).html(html2)
                    //console.log("onde ...........")
                    //console.log(onde)
                    $("#panelOrder2").html($("#" + alvo).html())

                    $(".statusBar").each(function () {
                        //console.log($(this).attr("class"))
                        var status = Number($(this).attr("status"))
                        var statusName = Number($(this).attr("statusName"))

                        var color = '#f6b504',
                            bkColor = '#FAF3DF'
                        if (Number(status) == 4) {
                            color = 'rgb(80, 198, 130);'
                        }

                        //console.log(".status" + status + "_" + alvo.replace("pedido_", ""))
                        if (Number(status) == 4 && Number(statusName) == 4) {
                            color = '#50C682'
                            bkColor = '#99D4AE33;'
                            $("." + $(this).attr("icone")).parent().addClass("esse2")
                            $("." + $(this).attr("icone")).css("fill", color)
                            $("." + $(this).attr("icone")).parent().removeClass("inativo")
                        } else if (status == statusName || Number(status) > Number(statusName)) {
                            $("." + $(this).attr("icone")).css("fill", color)
                            $("." + $(this).attr("icone")).parent().addClass("esse")
                            $("." + $(this).attr("icone")).parent().removeClass("inativo")
                        }



                    })


                    $("#panelOrder2").removeClass("animated-background")
                    $(".radius20").removeClass("animated-background")
                    $("body").css("filter", "none")


                },
                error: function (html2) {
                    //console.log(html2);
                    $("body").css("filter", "none")
                },
                complete: function () { },
            });



        }, 200)



    }






    $("body").css("filter", "blur(5px)")
    $.ajax({
        type: "POST",
        url: mainHost + '/getAllOrdersMaster',
        headers: {
            "x-access-token": localStorage.token,
        },
        data: {
            "master_id": localStorage.MASTER_ID
        },
        success: function (data) {
            //console.log("os pedidos", data);

            localStorage.TODOS_OS_PEDIDOS = JSON.stringify(data)

            reloadThis()



        },
        error: function (data) {
            //console.log(data);
        },
        complete: function () {
          $("body").css("filter", "none")
        },
    });

    let checkupOrders = false
    async function updateTotalPedidos() {
        let PEDIDOS = JSON.parse(localStorage.TODOS_OS_PEDIDOS)

        if (!checkupOrders) {
            for (const k in PEDIDOS) {
                let CONTEUDO = JSON.parse(PEDIDOS[k].order_conteudo)
                let valorEntrega = PEDIDOS[k].order_valor_entrega
                let totalItens = 0
                for (const c in CONTEUDO) {
                    totalItens += (CONTEUDO[c].quantidade >= CONTEUDO[c].minimo_para_desconto ? CONTEUDO[c].valor : CONTEUDO[c].product_valor)
                }
                PEDIDOS[k]['order_valor_total'] = Number((valorEntrega + totalItens).toFixed(2))
                PEDIDOS[k]['order_data_entrega'] = moment(PEDIDOS[k]['order_data_entrega']).format('YYYY-MM-DD')
                PEDIDOS[k]['updatedAt'] = moment(PEDIDOS[k]['updatedAt']).format('YYYY-MM-DD')
                PEDIDOS[k]['createdAt'] = moment(PEDIDOS[k]['createdAt']).format('YYYY-MM-DD')

                salvaUmUnico(PEDIDOS[k])
            }
            localStorage.TODOS_OS_PEDIDOS = JSON.stringify(PEDIDOS)
            checkupOrders = true
        }





    }

    async function salvaUmUnico(pedido) {

        let columns = []
        for (const k in pedido) {
            if (k != 'id' && k != 'updatedAt' && k != 'createdAt') {
                columns.push({
                    column: k,
                    value: pedido[k]
                })
            }

        }

     
        let valorTotal = 0
        for(const k in columns){
            if(columns[k].column === "order_conteudo"){
                try{
                    let list = JSON.parse(columns[k].value)
                    for(const a in list){
                        valorTotal+= (list[a].quantidade * list[a].valor)
                    }
                    
                }catch(err){}
            }
        }
        for(const k in columns){
            if(columns[k].column === "order_valor_entrega"){
                    valorTotal+=columns[k].value
            }
        }

         for(const k in columns){
            if(columns[k].column === "order_valor_total"){
                columns[k].value = valorTotal
            }
        }

        await $.ajax({
            type: 'POST',
            url: mainHost + '/updateById',
            headers: {
                "x-access-token": localStorage.token,
            },
            data: {
                "table": "orders",
                "name_id": "id",
                "value_id": pedido.id,
                "fields": columns
            },
            success: function (data) {
                // //console.log(data)
            },
            error: function (data) {
                //console.log(data)
            },
            complete: function () {
                // ao final da requisição...
            }
        });


    }



</script>